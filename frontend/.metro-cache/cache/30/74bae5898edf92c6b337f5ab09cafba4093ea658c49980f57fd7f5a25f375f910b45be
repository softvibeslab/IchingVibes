{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":49,"index":153}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _expoSecureStore = require(_dependencyMap[2], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    setUser: user => set({\n      user,\n      isAuthenticated: !!user\n    }),\n    setToken: token => set({\n      token\n    }),\n    login: async (email, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.detail || 'Error al iniciar sesión');\n        }\n        const data = await response.json();\n        await SecureStore.setItemAsync('token', data.access_token);\n        set({\n          token: data.access_token\n        });\n\n        // Obtener info del usuario\n        const userResponse = await fetch(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${data.access_token}`\n          }\n        });\n        const userData = await userResponse.json();\n        set({\n          user: userData,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n    register: async (email, password, name) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password,\n            name\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.detail || 'Error al registrarse');\n        }\n        const data = await response.json();\n        await SecureStore.setItemAsync('token', data.access_token);\n        set({\n          token: data.access_token\n        });\n\n        // Obtener info del usuario\n        const userResponse = await fetch(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${data.access_token}`\n          }\n        });\n        const userData = await userResponse.json();\n        set({\n          user: userData,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n    logout: async () => {\n      await SecureStore.deleteItemAsync('token');\n      set({\n        user: null,\n        token: null,\n        isAuthenticated: false\n      });\n    },\n    loadToken: async () => {\n      try {\n        set({\n          isLoading: true\n        });\n        const token = await SecureStore.getItemAsync('token');\n        if (token) {\n          set({\n            token\n          });\n          // Verificar token y obtener usuario\n          const userResponse = await fetch(`${API_URL}/api/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (userResponse.ok) {\n            const userData = await userResponse.json();\n            set({\n              user: userData,\n              isAuthenticated: true\n            });\n          } else {\n            // Token inválido\n            await SecureStore.deleteItemAsync('token');\n            set({\n              token: null,\n              user: null,\n              isAuthenticated: false\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Error loading token:', error);\n      } finally {\n        set({\n          isLoading: false\n        });\n      }\n    }\n  }));\n});","lineCount":169,"map":[[22,2,26,0,"Object"],[22,8,26,0],[22,9,26,0,"defineProperty"],[22,23,26,0],[22,24,26,0,"exports"],[22,31,26,0],[23,4,26,0,"enumerable"],[23,14,26,0],[24,4,26,0,"get"],[24,7,26,0],[24,18,26,0,"get"],[24,19,26,0],[25,6,26,0],[25,13,26,0,"useAuthStore"],[25,25,26,0],[26,4,26,0],[27,2,26,0],[28,2,123,4],[28,6,123,4,"_expoVirtualEnv"],[28,21,123,4],[28,24,123,4,"require"],[28,31,123,4],[28,32,123,4,"_dependencyMap"],[28,46,123,4],[29,2,1,0],[29,6,1,0,"_zustand"],[29,14,1,0],[29,17,1,0,"require"],[29,24,1,0],[29,25,1,0,"_dependencyMap"],[29,39,1,0],[30,2,3,0],[30,6,3,0,"_expoSecureStore"],[30,22,3,0],[30,25,3,0,"require"],[30,32,3,0],[30,33,3,0,"_dependencyMap"],[30,47,3,0],[31,2,3,0],[31,6,3,0,"SecureStore"],[31,17,3,0],[31,20,3,0,"_interopNamespace"],[31,37,3,0],[31,38,3,0,"_expoSecureStore"],[31,54,3,0],[32,2,24,0],[32,8,24,6,"API_URL"],[32,15,24,13],[32,18,24,13,"_expoVirtualEnv"],[32,33,24,13],[32,34,24,13,"env"],[32,37,24,13],[32,38,24,13,"EXPO_PUBLIC_BACKEND_URL"],[32,61,24,51],[33,2,26,7],[33,8,26,13,"useAuthStore"],[33,20,26,25],[33,23,26,28],[33,27,26,28,"create"],[33,35,26,34],[33,36,26,34,"create"],[33,42,26,34],[33,44,26,46],[33,45,26,47,"set"],[33,48,26,50],[33,50,26,52,"get"],[33,53,26,55],[33,59,26,61],[34,4,27,2,"user"],[34,8,27,6],[34,10,27,8],[34,14,27,12],[35,4,28,2,"token"],[35,9,28,7],[35,11,28,9],[35,15,28,13],[36,4,29,2,"isLoading"],[36,13,29,11],[36,15,29,13],[36,19,29,17],[37,4,30,2,"isAuthenticated"],[37,19,30,17],[37,21,30,19],[37,26,30,24],[38,4,32,2,"setUser"],[38,11,32,9],[38,13,32,12,"user"],[38,17,32,16],[38,21,32,21,"set"],[38,24,32,24],[38,25,32,25],[39,6,32,27,"user"],[39,10,32,31],[40,6,32,33,"isAuthenticated"],[40,21,32,48],[40,23,32,50],[40,24,32,51],[40,25,32,52,"user"],[41,4,32,57],[41,5,32,58],[41,6,32,59],[42,4,33,2,"setToken"],[42,12,33,10],[42,14,33,13,"token"],[42,19,33,18],[42,23,33,23,"set"],[42,26,33,26],[42,27,33,27],[43,6,33,29,"token"],[44,4,33,35],[44,5,33,36],[44,6,33,37],[45,4,35,2,"login"],[45,9,35,7],[45,11,35,9],[45,17,35,9,"login"],[45,18,35,16,"email"],[45,23,35,29],[45,25,35,31,"password"],[45,33,35,47],[45,38,35,52],[46,6,36,4],[46,10,36,8],[47,8,37,6],[47,14,37,12,"response"],[47,22,37,20],[47,25,37,23],[47,31,37,29,"fetch"],[47,36,37,34],[47,37,37,35],[47,40,37,38,"API_URL"],[47,47,37,45],[47,64,37,62],[47,66,37,64],[48,10,38,8,"method"],[48,16,38,14],[48,18,38,16],[48,24,38,22],[49,10,39,8,"headers"],[49,17,39,15],[49,19,39,17],[50,12,39,19],[50,26,39,33],[50,28,39,35],[51,10,39,54],[51,11,39,55],[52,10,40,8,"body"],[52,14,40,12],[52,16,40,14,"JSON"],[52,20,40,18],[52,21,40,19,"stringify"],[52,30,40,28],[52,31,40,29],[53,12,40,31,"email"],[53,17,40,36],[54,12,40,38,"password"],[55,10,40,47],[55,11,40,48],[56,8,41,6],[56,9,41,7],[56,10,41,8],[57,8,43,6],[57,12,43,10],[57,13,43,11,"response"],[57,21,43,19],[57,22,43,20,"ok"],[57,24,43,22],[57,26,43,24],[58,10,44,8],[58,16,44,14,"error"],[58,21,44,19],[58,24,44,22],[58,30,44,28,"response"],[58,38,44,36],[58,39,44,37,"json"],[58,43,44,41],[58,44,44,42],[58,45,44,43],[59,10,45,8],[59,16,45,14],[59,20,45,18,"Error"],[59,25,45,23],[59,26,45,24,"error"],[59,31,45,29],[59,32,45,30,"detail"],[59,38,45,36],[59,42,45,40],[59,67,45,65],[59,68,45,66],[60,8,46,6],[61,8,48,6],[61,14,48,12,"data"],[61,18,48,16],[61,21,48,19],[61,27,48,25,"response"],[61,35,48,33],[61,36,48,34,"json"],[61,40,48,38],[61,41,48,39],[61,42,48,40],[62,8,49,6],[62,14,49,12,"SecureStore"],[62,25,49,23],[62,26,49,24,"setItemAsync"],[62,38,49,36],[62,39,49,37],[62,46,49,44],[62,48,49,46,"data"],[62,52,49,50],[62,53,49,51,"access_token"],[62,65,49,63],[62,66,49,64],[63,8,50,6,"set"],[63,11,50,9],[63,12,50,10],[64,10,50,12,"token"],[64,15,50,17],[64,17,50,19,"data"],[64,21,50,23],[64,22,50,24,"access_token"],[65,8,50,37],[65,9,50,38],[65,10,50,39],[67,8,52,6],[68,8,53,6],[68,14,53,12,"userResponse"],[68,26,53,24],[68,29,53,27],[68,35,53,33,"fetch"],[68,40,53,38],[68,41,53,39],[68,44,53,42,"API_URL"],[68,51,53,49],[68,65,53,63],[68,67,53,65],[69,10,54,8,"headers"],[69,17,54,15],[69,19,54,17],[70,12,54,19,"Authorization"],[70,25,54,32],[70,27,54,34],[70,37,54,44,"data"],[70,41,54,48],[70,42,54,49,"access_token"],[70,54,54,61],[71,10,54,64],[72,8,55,6],[72,9,55,7],[72,10,55,8],[73,8,56,6],[73,14,56,12,"userData"],[73,22,56,20],[73,25,56,23],[73,31,56,29,"userResponse"],[73,43,56,41],[73,44,56,42,"json"],[73,48,56,46],[73,49,56,47],[73,50,56,48],[74,8,57,6,"set"],[74,11,57,9],[74,12,57,10],[75,10,57,12,"user"],[75,14,57,16],[75,16,57,18,"userData"],[75,24,57,26],[76,10,57,28,"isAuthenticated"],[76,25,57,43],[76,27,57,45],[77,8,57,50],[77,9,57,51],[77,10,57,52],[78,6,58,4],[78,7,58,5],[78,8,58,6],[78,15,58,13,"error"],[78,20,58,18],[78,22,58,20],[79,8,59,6],[79,14,59,12,"error"],[79,19,59,17],[80,6,60,4],[81,4,61,2],[81,5,61,3],[82,4,63,2,"register"],[82,12,63,10],[82,14,63,12],[82,20,63,12,"register"],[82,21,63,19,"email"],[82,26,63,32],[82,28,63,34,"password"],[82,36,63,50],[82,38,63,52,"name"],[82,42,63,64],[82,47,63,69],[83,6,64,4],[83,10,64,8],[84,8,65,6],[84,14,65,12,"response"],[84,22,65,20],[84,25,65,23],[84,31,65,29,"fetch"],[84,36,65,34],[84,37,65,35],[84,40,65,38,"API_URL"],[84,47,65,45],[84,67,65,65],[84,69,65,67],[85,10,66,8,"method"],[85,16,66,14],[85,18,66,16],[85,24,66,22],[86,10,67,8,"headers"],[86,17,67,15],[86,19,67,17],[87,12,67,19],[87,26,67,33],[87,28,67,35],[88,10,67,54],[88,11,67,55],[89,10,68,8,"body"],[89,14,68,12],[89,16,68,14,"JSON"],[89,20,68,18],[89,21,68,19,"stringify"],[89,30,68,28],[89,31,68,29],[90,12,68,31,"email"],[90,17,68,36],[91,12,68,38,"password"],[91,20,68,46],[92,12,68,48,"name"],[93,10,68,53],[93,11,68,54],[94,8,69,6],[94,9,69,7],[94,10,69,8],[95,8,71,6],[95,12,71,10],[95,13,71,11,"response"],[95,21,71,19],[95,22,71,20,"ok"],[95,24,71,22],[95,26,71,24],[96,10,72,8],[96,16,72,14,"error"],[96,21,72,19],[96,24,72,22],[96,30,72,28,"response"],[96,38,72,36],[96,39,72,37,"json"],[96,43,72,41],[96,44,72,42],[96,45,72,43],[97,10,73,8],[97,16,73,14],[97,20,73,18,"Error"],[97,25,73,23],[97,26,73,24,"error"],[97,31,73,29],[97,32,73,30,"detail"],[97,38,73,36],[97,42,73,40],[97,64,73,62],[97,65,73,63],[98,8,74,6],[99,8,76,6],[99,14,76,12,"data"],[99,18,76,16],[99,21,76,19],[99,27,76,25,"response"],[99,35,76,33],[99,36,76,34,"json"],[99,40,76,38],[99,41,76,39],[99,42,76,40],[100,8,77,6],[100,14,77,12,"SecureStore"],[100,25,77,23],[100,26,77,24,"setItemAsync"],[100,38,77,36],[100,39,77,37],[100,46,77,44],[100,48,77,46,"data"],[100,52,77,50],[100,53,77,51,"access_token"],[100,65,77,63],[100,66,77,64],[101,8,78,6,"set"],[101,11,78,9],[101,12,78,10],[102,10,78,12,"token"],[102,15,78,17],[102,17,78,19,"data"],[102,21,78,23],[102,22,78,24,"access_token"],[103,8,78,37],[103,9,78,38],[103,10,78,39],[105,8,80,6],[106,8,81,6],[106,14,81,12,"userResponse"],[106,26,81,24],[106,29,81,27],[106,35,81,33,"fetch"],[106,40,81,38],[106,41,81,39],[106,44,81,42,"API_URL"],[106,51,81,49],[106,65,81,63],[106,67,81,65],[107,10,82,8,"headers"],[107,17,82,15],[107,19,82,17],[108,12,82,19,"Authorization"],[108,25,82,32],[108,27,82,34],[108,37,82,44,"data"],[108,41,82,48],[108,42,82,49,"access_token"],[108,54,82,61],[109,10,82,64],[110,8,83,6],[110,9,83,7],[110,10,83,8],[111,8,84,6],[111,14,84,12,"userData"],[111,22,84,20],[111,25,84,23],[111,31,84,29,"userResponse"],[111,43,84,41],[111,44,84,42,"json"],[111,48,84,46],[111,49,84,47],[111,50,84,48],[112,8,85,6,"set"],[112,11,85,9],[112,12,85,10],[113,10,85,12,"user"],[113,14,85,16],[113,16,85,18,"userData"],[113,24,85,26],[114,10,85,28,"isAuthenticated"],[114,25,85,43],[114,27,85,45],[115,8,85,50],[115,9,85,51],[115,10,85,52],[116,6,86,4],[116,7,86,5],[116,8,86,6],[116,15,86,13,"error"],[116,20,86,18],[116,22,86,20],[117,8,87,6],[117,14,87,12,"error"],[117,19,87,17],[118,6,88,4],[119,4,89,2],[119,5,89,3],[120,4,91,2,"logout"],[120,10,91,8],[120,12,91,10],[120,18,91,10,"logout"],[120,19,91,10],[120,24,91,22],[121,6,92,4],[121,12,92,10,"SecureStore"],[121,23,92,21],[121,24,92,22,"deleteItemAsync"],[121,39,92,37],[121,40,92,38],[121,47,92,45],[121,48,92,46],[122,6,93,4,"set"],[122,9,93,7],[122,10,93,8],[123,8,93,10,"user"],[123,12,93,14],[123,14,93,16],[123,18,93,20],[124,8,93,22,"token"],[124,13,93,27],[124,15,93,29],[124,19,93,33],[125,8,93,35,"isAuthenticated"],[125,23,93,50],[125,25,93,52],[126,6,93,58],[126,7,93,59],[126,8,93,60],[127,4,94,2],[127,5,94,3],[128,4,96,2,"loadToken"],[128,13,96,11],[128,15,96,13],[128,21,96,13,"loadToken"],[128,22,96,13],[128,27,96,25],[129,6,97,4],[129,10,97,8],[130,8,98,6,"set"],[130,11,98,9],[130,12,98,10],[131,10,98,12,"isLoading"],[131,19,98,21],[131,21,98,23],[132,8,98,28],[132,9,98,29],[132,10,98,30],[133,8,99,6],[133,14,99,12,"token"],[133,19,99,17],[133,22,99,20],[133,28,99,26,"SecureStore"],[133,39,99,37],[133,40,99,38,"getItemAsync"],[133,52,99,50],[133,53,99,51],[133,60,99,58],[133,61,99,59],[134,8,101,6],[134,12,101,10,"token"],[134,17,101,15],[134,19,101,17],[135,10,102,8,"set"],[135,13,102,11],[135,14,102,12],[136,12,102,14,"token"],[137,10,102,20],[137,11,102,21],[137,12,102,22],[138,10,103,8],[139,10,104,8],[139,16,104,14,"userResponse"],[139,28,104,26],[139,31,104,29],[139,37,104,35,"fetch"],[139,42,104,40],[139,43,104,41],[139,46,104,44,"API_URL"],[139,53,104,51],[139,67,104,65],[139,69,104,67],[140,12,105,10,"headers"],[140,19,105,17],[140,21,105,19],[141,14,105,21,"Authorization"],[141,27,105,34],[141,29,105,36],[141,39,105,46,"token"],[141,44,105,51],[142,12,105,54],[143,10,106,8],[143,11,106,9],[143,12,106,10],[144,10,108,8],[144,14,108,12,"userResponse"],[144,26,108,24],[144,27,108,25,"ok"],[144,29,108,27],[144,31,108,29],[145,12,109,10],[145,18,109,16,"userData"],[145,26,109,24],[145,29,109,27],[145,35,109,33,"userResponse"],[145,47,109,45],[145,48,109,46,"json"],[145,52,109,50],[145,53,109,51],[145,54,109,52],[146,12,110,10,"set"],[146,15,110,13],[146,16,110,14],[147,14,110,16,"user"],[147,18,110,20],[147,20,110,22,"userData"],[147,28,110,30],[148,14,110,32,"isAuthenticated"],[148,29,110,47],[148,31,110,49],[149,12,110,54],[149,13,110,55],[149,14,110,56],[150,10,111,8],[150,11,111,9],[150,17,111,15],[151,12,112,10],[152,12,113,10],[152,18,113,16,"SecureStore"],[152,29,113,27],[152,30,113,28,"deleteItemAsync"],[152,45,113,43],[152,46,113,44],[152,53,113,51],[152,54,113,52],[153,12,114,10,"set"],[153,15,114,13],[153,16,114,14],[154,14,114,16,"token"],[154,19,114,21],[154,21,114,23],[154,25,114,27],[155,14,114,29,"user"],[155,18,114,33],[155,20,114,35],[155,24,114,39],[156,14,114,41,"isAuthenticated"],[156,29,114,56],[156,31,114,58],[157,12,114,64],[157,13,114,65],[157,14,114,66],[158,10,115,8],[159,8,116,6],[160,6,117,4],[160,7,117,5],[160,8,117,6],[160,15,117,13,"error"],[160,20,117,18],[160,22,117,20],[161,8,118,6,"console"],[161,15,118,13],[161,16,118,14,"error"],[161,21,118,19],[161,22,118,20],[161,44,118,42],[161,46,118,44,"error"],[161,51,118,49],[161,52,118,50],[162,6,119,4],[162,7,119,5],[162,16,119,14],[163,8,120,6,"set"],[163,11,120,9],[163,12,120,10],[164,10,120,12,"isLoading"],[164,19,120,21],[164,21,120,23],[165,8,120,29],[165,9,120,30],[165,10,120,31],[166,6,121,4],[167,4,122,2],[168,2,123,0],[168,3,123,1],[168,4,123,2],[168,5,123,3],[169,0,123,4],[169,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","setToken","login","register","logout","loadToken"],"mappings":"AAA;8CCyB;WCM,gDD;YEC,yBF;SGE;GH0B;YIE;GJ0B;UKE;GLG;aME;GN0B;EDC"},"hasCjsExports":false},"type":"js/module"}]}
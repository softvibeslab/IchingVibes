{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":49,"index":153}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    setUser: user => set({\n      user,\n      isAuthenticated: !!user\n    }),\n    setToken: token => set({\n      token\n    }),\n    login: async (email, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.detail || 'Error al iniciar sesión');\n        }\n        const data = await response.json();\n        await SecureStore.setItemAsync('token', data.access_token);\n        set({\n          token: data.access_token\n        });\n\n        // Obtener info del usuario\n        const userResponse = await fetch(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${data.access_token}`\n          }\n        });\n        const userData = await userResponse.json();\n        set({\n          user: userData,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n    register: async (email, password, name) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password,\n            name\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.detail || 'Error al registrarse');\n        }\n        const data = await response.json();\n        await SecureStore.setItemAsync('token', data.access_token);\n        set({\n          token: data.access_token\n        });\n\n        // Obtener info del usuario\n        const userResponse = await fetch(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${data.access_token}`\n          }\n        });\n        const userData = await userResponse.json();\n        set({\n          user: userData,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n    logout: async () => {\n      await SecureStore.deleteItemAsync('token');\n      set({\n        user: null,\n        token: null,\n        isAuthenticated: false\n      });\n    },\n    loadToken: async () => {\n      try {\n        set({\n          isLoading: true\n        });\n        const token = await SecureStore.getItemAsync('token');\n        if (token) {\n          set({\n            token\n          });\n          // Verificar token y obtener usuario\n          const userResponse = await fetch(`${API_URL}/api/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (userResponse.ok) {\n            const userData = await userResponse.json();\n            set({\n              user: userData,\n              isAuthenticated: true\n            });\n          } else {\n            // Token inválido\n            await SecureStore.deleteItemAsync('token');\n            set({\n              token: null,\n              user: null,\n              isAuthenticated: false\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Error loading token:', error);\n      } finally {\n        set({\n          isLoading: false\n        });\n      }\n    }\n  }));\n});","lineCount":168,"map":[[22,2,26,0,"Object"],[22,8,26,0],[22,9,26,0,"defineProperty"],[22,23,26,0],[22,24,26,0,"exports"],[22,31,26,0],[23,4,26,0,"enumerable"],[23,14,26,0],[24,4,26,0,"get"],[24,7,26,0],[24,18,26,0,"get"],[24,19,26,0],[25,6,26,0],[25,13,26,0,"useAuthStore"],[25,25,26,0],[26,4,26,0],[27,2,26,0],[28,2,1,0],[28,6,1,0,"_zustand"],[28,14,1,0],[28,17,1,0,"require"],[28,24,1,0],[28,25,1,0,"_dependencyMap"],[28,39,1,0],[29,2,3,0],[29,6,3,0,"_expoSecureStore"],[29,22,3,0],[29,25,3,0,"require"],[29,32,3,0],[29,33,3,0,"_dependencyMap"],[29,47,3,0],[30,2,3,0],[30,6,3,0,"SecureStore"],[30,17,3,0],[30,20,3,0,"_interopNamespace"],[30,37,3,0],[30,38,3,0,"_expoSecureStore"],[30,54,3,0],[31,2,24,0],[31,8,24,6,"API_URL"],[31,15,24,13],[31,18,24,16,"process"],[31,25,24,23],[31,26,24,24,"env"],[31,29,24,27],[31,30,24,28,"EXPO_PUBLIC_BACKEND_URL"],[31,53,24,51],[32,2,26,7],[32,8,26,13,"useAuthStore"],[32,20,26,25],[32,23,26,28],[32,27,26,28,"create"],[32,35,26,34],[32,36,26,34,"create"],[32,42,26,34],[32,44,26,46],[32,45,26,47,"set"],[32,48,26,50],[32,50,26,52,"get"],[32,53,26,55],[32,59,26,61],[33,4,27,2,"user"],[33,8,27,6],[33,10,27,8],[33,14,27,12],[34,4,28,2,"token"],[34,9,28,7],[34,11,28,9],[34,15,28,13],[35,4,29,2,"isLoading"],[35,13,29,11],[35,15,29,13],[35,19,29,17],[36,4,30,2,"isAuthenticated"],[36,19,30,17],[36,21,30,19],[36,26,30,24],[37,4,32,2,"setUser"],[37,11,32,9],[37,13,32,12,"user"],[37,17,32,16],[37,21,32,21,"set"],[37,24,32,24],[37,25,32,25],[38,6,32,27,"user"],[38,10,32,31],[39,6,32,33,"isAuthenticated"],[39,21,32,48],[39,23,32,50],[39,24,32,51],[39,25,32,52,"user"],[40,4,32,57],[40,5,32,58],[40,6,32,59],[41,4,33,2,"setToken"],[41,12,33,10],[41,14,33,13,"token"],[41,19,33,18],[41,23,33,23,"set"],[41,26,33,26],[41,27,33,27],[42,6,33,29,"token"],[43,4,33,35],[43,5,33,36],[43,6,33,37],[44,4,35,2,"login"],[44,9,35,7],[44,11,35,9],[44,17,35,9,"login"],[44,18,35,16,"email"],[44,23,35,29],[44,25,35,31,"password"],[44,33,35,47],[44,38,35,52],[45,6,36,4],[45,10,36,8],[46,8,37,6],[46,14,37,12,"response"],[46,22,37,20],[46,25,37,23],[46,31,37,29,"fetch"],[46,36,37,34],[46,37,37,35],[46,40,37,38,"API_URL"],[46,47,37,45],[46,64,37,62],[46,66,37,64],[47,10,38,8,"method"],[47,16,38,14],[47,18,38,16],[47,24,38,22],[48,10,39,8,"headers"],[48,17,39,15],[48,19,39,17],[49,12,39,19],[49,26,39,33],[49,28,39,35],[50,10,39,54],[50,11,39,55],[51,10,40,8,"body"],[51,14,40,12],[51,16,40,14,"JSON"],[51,20,40,18],[51,21,40,19,"stringify"],[51,30,40,28],[51,31,40,29],[52,12,40,31,"email"],[52,17,40,36],[53,12,40,38,"password"],[54,10,40,47],[54,11,40,48],[55,8,41,6],[55,9,41,7],[55,10,41,8],[56,8,43,6],[56,12,43,10],[56,13,43,11,"response"],[56,21,43,19],[56,22,43,20,"ok"],[56,24,43,22],[56,26,43,24],[57,10,44,8],[57,16,44,14,"error"],[57,21,44,19],[57,24,44,22],[57,30,44,28,"response"],[57,38,44,36],[57,39,44,37,"json"],[57,43,44,41],[57,44,44,42],[57,45,44,43],[58,10,45,8],[58,16,45,14],[58,20,45,18,"Error"],[58,25,45,23],[58,26,45,24,"error"],[58,31,45,29],[58,32,45,30,"detail"],[58,38,45,36],[58,42,45,40],[58,67,45,65],[58,68,45,66],[59,8,46,6],[60,8,48,6],[60,14,48,12,"data"],[60,18,48,16],[60,21,48,19],[60,27,48,25,"response"],[60,35,48,33],[60,36,48,34,"json"],[60,40,48,38],[60,41,48,39],[60,42,48,40],[61,8,49,6],[61,14,49,12,"SecureStore"],[61,25,49,23],[61,26,49,24,"setItemAsync"],[61,38,49,36],[61,39,49,37],[61,46,49,44],[61,48,49,46,"data"],[61,52,49,50],[61,53,49,51,"access_token"],[61,65,49,63],[61,66,49,64],[62,8,50,6,"set"],[62,11,50,9],[62,12,50,10],[63,10,50,12,"token"],[63,15,50,17],[63,17,50,19,"data"],[63,21,50,23],[63,22,50,24,"access_token"],[64,8,50,37],[64,9,50,38],[64,10,50,39],[66,8,52,6],[67,8,53,6],[67,14,53,12,"userResponse"],[67,26,53,24],[67,29,53,27],[67,35,53,33,"fetch"],[67,40,53,38],[67,41,53,39],[67,44,53,42,"API_URL"],[67,51,53,49],[67,65,53,63],[67,67,53,65],[68,10,54,8,"headers"],[68,17,54,15],[68,19,54,17],[69,12,54,19,"Authorization"],[69,25,54,32],[69,27,54,34],[69,37,54,44,"data"],[69,41,54,48],[69,42,54,49,"access_token"],[69,54,54,61],[70,10,54,64],[71,8,55,6],[71,9,55,7],[71,10,55,8],[72,8,56,6],[72,14,56,12,"userData"],[72,22,56,20],[72,25,56,23],[72,31,56,29,"userResponse"],[72,43,56,41],[72,44,56,42,"json"],[72,48,56,46],[72,49,56,47],[72,50,56,48],[73,8,57,6,"set"],[73,11,57,9],[73,12,57,10],[74,10,57,12,"user"],[74,14,57,16],[74,16,57,18,"userData"],[74,24,57,26],[75,10,57,28,"isAuthenticated"],[75,25,57,43],[75,27,57,45],[76,8,57,50],[76,9,57,51],[76,10,57,52],[77,6,58,4],[77,7,58,5],[77,8,58,6],[77,15,58,13,"error"],[77,20,58,18],[77,22,58,20],[78,8,59,6],[78,14,59,12,"error"],[78,19,59,17],[79,6,60,4],[80,4,61,2],[80,5,61,3],[81,4,63,2,"register"],[81,12,63,10],[81,14,63,12],[81,20,63,12,"register"],[81,21,63,19,"email"],[81,26,63,32],[81,28,63,34,"password"],[81,36,63,50],[81,38,63,52,"name"],[81,42,63,64],[81,47,63,69],[82,6,64,4],[82,10,64,8],[83,8,65,6],[83,14,65,12,"response"],[83,22,65,20],[83,25,65,23],[83,31,65,29,"fetch"],[83,36,65,34],[83,37,65,35],[83,40,65,38,"API_URL"],[83,47,65,45],[83,67,65,65],[83,69,65,67],[84,10,66,8,"method"],[84,16,66,14],[84,18,66,16],[84,24,66,22],[85,10,67,8,"headers"],[85,17,67,15],[85,19,67,17],[86,12,67,19],[86,26,67,33],[86,28,67,35],[87,10,67,54],[87,11,67,55],[88,10,68,8,"body"],[88,14,68,12],[88,16,68,14,"JSON"],[88,20,68,18],[88,21,68,19,"stringify"],[88,30,68,28],[88,31,68,29],[89,12,68,31,"email"],[89,17,68,36],[90,12,68,38,"password"],[90,20,68,46],[91,12,68,48,"name"],[92,10,68,53],[92,11,68,54],[93,8,69,6],[93,9,69,7],[93,10,69,8],[94,8,71,6],[94,12,71,10],[94,13,71,11,"response"],[94,21,71,19],[94,22,71,20,"ok"],[94,24,71,22],[94,26,71,24],[95,10,72,8],[95,16,72,14,"error"],[95,21,72,19],[95,24,72,22],[95,30,72,28,"response"],[95,38,72,36],[95,39,72,37,"json"],[95,43,72,41],[95,44,72,42],[95,45,72,43],[96,10,73,8],[96,16,73,14],[96,20,73,18,"Error"],[96,25,73,23],[96,26,73,24,"error"],[96,31,73,29],[96,32,73,30,"detail"],[96,38,73,36],[96,42,73,40],[96,64,73,62],[96,65,73,63],[97,8,74,6],[98,8,76,6],[98,14,76,12,"data"],[98,18,76,16],[98,21,76,19],[98,27,76,25,"response"],[98,35,76,33],[98,36,76,34,"json"],[98,40,76,38],[98,41,76,39],[98,42,76,40],[99,8,77,6],[99,14,77,12,"SecureStore"],[99,25,77,23],[99,26,77,24,"setItemAsync"],[99,38,77,36],[99,39,77,37],[99,46,77,44],[99,48,77,46,"data"],[99,52,77,50],[99,53,77,51,"access_token"],[99,65,77,63],[99,66,77,64],[100,8,78,6,"set"],[100,11,78,9],[100,12,78,10],[101,10,78,12,"token"],[101,15,78,17],[101,17,78,19,"data"],[101,21,78,23],[101,22,78,24,"access_token"],[102,8,78,37],[102,9,78,38],[102,10,78,39],[104,8,80,6],[105,8,81,6],[105,14,81,12,"userResponse"],[105,26,81,24],[105,29,81,27],[105,35,81,33,"fetch"],[105,40,81,38],[105,41,81,39],[105,44,81,42,"API_URL"],[105,51,81,49],[105,65,81,63],[105,67,81,65],[106,10,82,8,"headers"],[106,17,82,15],[106,19,82,17],[107,12,82,19,"Authorization"],[107,25,82,32],[107,27,82,34],[107,37,82,44,"data"],[107,41,82,48],[107,42,82,49,"access_token"],[107,54,82,61],[108,10,82,64],[109,8,83,6],[109,9,83,7],[109,10,83,8],[110,8,84,6],[110,14,84,12,"userData"],[110,22,84,20],[110,25,84,23],[110,31,84,29,"userResponse"],[110,43,84,41],[110,44,84,42,"json"],[110,48,84,46],[110,49,84,47],[110,50,84,48],[111,8,85,6,"set"],[111,11,85,9],[111,12,85,10],[112,10,85,12,"user"],[112,14,85,16],[112,16,85,18,"userData"],[112,24,85,26],[113,10,85,28,"isAuthenticated"],[113,25,85,43],[113,27,85,45],[114,8,85,50],[114,9,85,51],[114,10,85,52],[115,6,86,4],[115,7,86,5],[115,8,86,6],[115,15,86,13,"error"],[115,20,86,18],[115,22,86,20],[116,8,87,6],[116,14,87,12,"error"],[116,19,87,17],[117,6,88,4],[118,4,89,2],[118,5,89,3],[119,4,91,2,"logout"],[119,10,91,8],[119,12,91,10],[119,18,91,10,"logout"],[119,19,91,10],[119,24,91,22],[120,6,92,4],[120,12,92,10,"SecureStore"],[120,23,92,21],[120,24,92,22,"deleteItemAsync"],[120,39,92,37],[120,40,92,38],[120,47,92,45],[120,48,92,46],[121,6,93,4,"set"],[121,9,93,7],[121,10,93,8],[122,8,93,10,"user"],[122,12,93,14],[122,14,93,16],[122,18,93,20],[123,8,93,22,"token"],[123,13,93,27],[123,15,93,29],[123,19,93,33],[124,8,93,35,"isAuthenticated"],[124,23,93,50],[124,25,93,52],[125,6,93,58],[125,7,93,59],[125,8,93,60],[126,4,94,2],[126,5,94,3],[127,4,96,2,"loadToken"],[127,13,96,11],[127,15,96,13],[127,21,96,13,"loadToken"],[127,22,96,13],[127,27,96,25],[128,6,97,4],[128,10,97,8],[129,8,98,6,"set"],[129,11,98,9],[129,12,98,10],[130,10,98,12,"isLoading"],[130,19,98,21],[130,21,98,23],[131,8,98,28],[131,9,98,29],[131,10,98,30],[132,8,99,6],[132,14,99,12,"token"],[132,19,99,17],[132,22,99,20],[132,28,99,26,"SecureStore"],[132,39,99,37],[132,40,99,38,"getItemAsync"],[132,52,99,50],[132,53,99,51],[132,60,99,58],[132,61,99,59],[133,8,101,6],[133,12,101,10,"token"],[133,17,101,15],[133,19,101,17],[134,10,102,8,"set"],[134,13,102,11],[134,14,102,12],[135,12,102,14,"token"],[136,10,102,20],[136,11,102,21],[136,12,102,22],[137,10,103,8],[138,10,104,8],[138,16,104,14,"userResponse"],[138,28,104,26],[138,31,104,29],[138,37,104,35,"fetch"],[138,42,104,40],[138,43,104,41],[138,46,104,44,"API_URL"],[138,53,104,51],[138,67,104,65],[138,69,104,67],[139,12,105,10,"headers"],[139,19,105,17],[139,21,105,19],[140,14,105,21,"Authorization"],[140,27,105,34],[140,29,105,36],[140,39,105,46,"token"],[140,44,105,51],[141,12,105,54],[142,10,106,8],[142,11,106,9],[142,12,106,10],[143,10,108,8],[143,14,108,12,"userResponse"],[143,26,108,24],[143,27,108,25,"ok"],[143,29,108,27],[143,31,108,29],[144,12,109,10],[144,18,109,16,"userData"],[144,26,109,24],[144,29,109,27],[144,35,109,33,"userResponse"],[144,47,109,45],[144,48,109,46,"json"],[144,52,109,50],[144,53,109,51],[144,54,109,52],[145,12,110,10,"set"],[145,15,110,13],[145,16,110,14],[146,14,110,16,"user"],[146,18,110,20],[146,20,110,22,"userData"],[146,28,110,30],[147,14,110,32,"isAuthenticated"],[147,29,110,47],[147,31,110,49],[148,12,110,54],[148,13,110,55],[148,14,110,56],[149,10,111,8],[149,11,111,9],[149,17,111,15],[150,12,112,10],[151,12,113,10],[151,18,113,16,"SecureStore"],[151,29,113,27],[151,30,113,28,"deleteItemAsync"],[151,45,113,43],[151,46,113,44],[151,53,113,51],[151,54,113,52],[152,12,114,10,"set"],[152,15,114,13],[152,16,114,14],[153,14,114,16,"token"],[153,19,114,21],[153,21,114,23],[153,25,114,27],[154,14,114,29,"user"],[154,18,114,33],[154,20,114,35],[154,24,114,39],[155,14,114,41,"isAuthenticated"],[155,29,114,56],[155,31,114,58],[156,12,114,64],[156,13,114,65],[156,14,114,66],[157,10,115,8],[158,8,116,6],[159,6,117,4],[159,7,117,5],[159,8,117,6],[159,15,117,13,"error"],[159,20,117,18],[159,22,117,20],[160,8,118,6,"console"],[160,15,118,13],[160,16,118,14,"error"],[160,21,118,19],[160,22,118,20],[160,44,118,42],[160,46,118,44,"error"],[160,51,118,49],[160,52,118,50],[161,6,119,4],[161,7,119,5],[161,16,119,14],[162,8,120,6,"set"],[162,11,120,9],[162,12,120,10],[163,10,120,12,"isLoading"],[163,19,120,21],[163,21,120,23],[164,8,120,29],[164,9,120,30],[164,10,120,31],[165,6,121,4],[166,4,122,2],[167,2,123,0],[167,3,123,1],[167,4,123,2],[167,5,123,3],[168,0,123,4],[168,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","setToken","login","register","logout","loadToken"],"mappings":"AAA;8CCyB;WCM,gDD;YEC,yBF;SGE;GH0B;YIE;GJ0B;UKE;GLG;aME;GN0B;EDC"},"hasCjsExports":false},"type":"js/module"}]}